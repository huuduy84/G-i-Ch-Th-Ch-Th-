<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Thư gửi Thỏ 🐰</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #ffd1e4, #ffb6d5);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .screen {
      display: none;
      text-align: center;
      animation: fade 0.8s ease;
    }
    .active {
      display: block;
    }
    @keyframes fade {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .box {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 16px;
      padding: 24px;
      max-width: 500px;
      margin: auto;
      box-shadow: 0 8px 30px rgba(0,0,0,0.1);
    }
    input {
      width: 100%;
      padding: 12px;
      font-size: 18px;
      border-radius: 10px;
      border: 2px solid #ff9fcf;
      text-align: center;
      outline: none;
    }
    button {
      background: #ff69b4;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      margin: 8px;
      transition: 0.3s;
    }
    button:hover {
      background: #ff85c1;
    }
    #password-error {
      min-height: 24px;
      margin-top: 8px;
      font-weight: bold;
      color: #e04f7a;
    }
    .hearts {
      font-size: 24px;
      animation: pulse 1.5s infinite;
    }
    @keyframes pulse {
      0%,100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }
    .letter {
      white-space: pre-line;
      text-align: left;
      line-height: 1.6;
    }
  </style>
</head>
<body>

  <!-- Màn hình nhập mật khẩu -->
  <div id="password-screen" class="screen active">
    <div class="box">
      <h2>🔒 Nhập mật khẩu để mở thư</h2>
      <input id="password-input" type="password" placeholder="Nhập mật khẩu...">
      <div id="password-error"></div>
      <button id="password-btn">Mở thư</button>
    </div>
  </div>

  <!-- Màn hình trái tim -->
  <div id="hearts-screen" class="screen">
    <div class="box">
      <div class="hearts">🌷💖🌷💗🌷💞</div>
      <h2>Bấm tiếp tục đi Thỏ 🐰</h2>
      <button onclick="goTo('letter-screen')">Tiếp tục</button>
    </div>
  </div>

  <!-- Màn hình bức thư -->
  <div id="letter-screen" class="screen">
    <div class="box">
      <h2>Thư gửi chị Trần Thị Phương Thảo (Thỏ 🐰)</h2>
      <div class="letter">
Haizz… Em lại làm chị giận nữa òi 😞  
Khi chị đọc thư này chắc chị vẫn còn đang giận em lắm ha 🥲  
Hong biết đây là lần thứ bao nhiêu trong tháng ròi ấy nhờ… haha.  
Nếu phải liệt kê thì tài năng của em chắc là làm cho chị giận ròi 😅  

Đã vậy cả tối em còn bỏ mặc chị nữa… Thật là tồi tệ, xứng đáng bị xử trảm 😔  

Cũng như mọi lần, em luôn sẽ cho chị được lựa chọn.  
Sau bao nhiêu thứ em làm khiến chị buồn như vậy…  
      </div>
      <div style="margin-top:16px;">
        <button onclick="goTo('stay-screen')">Ở lại 💖</button>
        <button onclick="goTo('leave-screen')">Rời đi 💔</button>
      </div>
    </div>
  </div>

  <!-- Màn hình ở lại -->
  <div id="stay-screen" class="screen">
    <div class="box">
      <h2>💖 Cảm ơn chị đã ở lại 💖</h2>
      <p>
Vậy ra chị chọn vẫn sẽ ở lại à 😊  
Thật tốt quá, em cứ tưởng mình bị vứt bỏ đi rồi chứ…  
Em biết mình vẫn là một đứa tồi tệ, còn nhiều điều chưa tốt cần phải sửa  
Nhưng em cũng sẽ cố gắng mà 💞  

Nên là tha thứ cho em lần này nha.  
Em biết lỗi ròi, em đã thực sự hối lỗi rồi, em hong dám nữa đâu.  
Em xin lỗi chị nhiều ❤️
      </p>
    </div>
  </div>

  <!-- Màn hình rời đi -->
  <div id="leave-screen" class="screen">
    <div class="box">
      <h2>💔 Nếu chị chọn rời đi...</h2>
      <p>
Ra lựa chọn của chị là rời đi à ☺️  
Em biết sớm muộn gì cũng có ngày này mà…  
Em biết thời gian qua chị đã chịu ấm ức nhiều lắm rồi.  

Cảm ơn chị đã dành nhiều thời gian và ý tốt cho em nha.  
Em xin lỗi vì mọi chuyện.  
Pái paiii 🌷
      </p>
    </div>
  </div>

  <script>
    // Điều khiển màn hình
    function goTo(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    // Xử lý mật khẩu
    (function(){
      const CORRECT = '0411';
      let attempts = 0;

      const inputEl = document.getElementById('password-input');
      const btnEl = document.getElementById('password-btn');
      const errEl = document.getElementById('password-error');

      function setError(msg){
        errEl.textContent = msg;
      }
      function clearError(){
        errEl.textContent = '';
      }
      function success(){
        clearError();
        goTo('hearts-screen');
      }
      function check(){
        const v = inputEl.value.trim();
        attempts++;
        if(v === CORRECT){
          success();
        } else {
          if(attempts === 1){
            setError('Sai òi, nhập lại đi 😅');
          } else if(attempts === 2){
            setError('Cố lên, sắp đúng ròi 💪');
          } else {
            setError('Vẫn sai nhập mật khẩu khác thử .');
          }
          inputEl.value = '';
          inputEl.focus();
        }
      }

      btnEl.addEventListener('click', check);
      inputEl.addEventListener('keydown', function(e){
        if(e.key === 'Enter') check();
      });
    })();
  </script>
</body>
  <!-- Mini game giận - tha thứ -->
  <div id="game" class="hidden fade">
    <h2>Chị có tha lỗi cho em hong? 🥺</h2>
    <button id="forgive" onclick="goToGifts()">Tha thứ 💖</button>
    <button id="angry" onclick="moveAngry()">Giận mãi mãi 😡</button>
  </div>

  <!-- Hộp quà -->
  <div id="gift-screen" class="hidden fade">
    <h2>🎁 Chọn 1 món quà cho chị 🐰</h2>
    <div class="gifts">
      <div class="gift" onclick="openGift(1)">🎀</div>
      <div class="gift" onclick="openGift(2)">🎀</div>
      <div class="gift" onclick="openGift(3)">🎀</div>
      <div class="gift" onclick="openGift(4)">🎀</div>
    </div>
    <div id="gift-result"></div>
  </div>

  <!-- Kết thúc -->
  <div id="end-screen" class="hidden fade">
    <h2>🌷 Tha thứ ròi là hong có dận nữa nhaa 🥰🌷</h2>
  </div>

<script>
  const passwordBtn = document.getElementById("password-btn");
  passwordBtn.addEventListener("click", ()=>{
    const val = document.getElementById("password-input").value;
    if(val==="0411"){
      document.getElementById("password-screen").classList.add("hidden");
      document.getElementById("hearts-screen").classList.remove("hidden");
    } else {
      document.getElementById("password-error").innerText="Sai mật khẩu òi 😢";
    }
  });

  function goToLetter(){
    document.getElementById("hearts-screen").classList.add("hidden");
    document.getElementById("letter-screen").classList.remove("hidden");
  }

  function chooseStay(){
    document.getElementById("letter-screen").classList.add("hidden");
    document.getElementById("stay-screen").classList.remove("hidden");
  }
  function chooseLeave(){
    document.getElementById("letter-screen").classList.add("hidden");
    document.getElementById("leave-screen").classList.remove("hidden");
  }

  function goToGame(){
    document.getElementById("stay-screen").classList.add("hidden");
    document.getElementById("game").classList.remove("hidden");
  }

  function moveAngry(){
    const angryBtn = document.getElementById("angry");
    angryBtn.style.position="absolute";
    angryBtn.style.top = Math.random()*300+"px";
    angryBtn.style.left = Math.random()*300+"px";
    const forgiveBtn = document.getElementById("forgive");
    forgiveBtn.style.transform="scale(1.2)";
  }

  function goToGifts(){
    document.getElementById("game").classList.add("hidden");
    document.getElementById("gift-screen").classList.remove("hidden");
  }

  function openGift(num){
    let text="";
    if(num===1) text="💐 Một bó hoa thật đẹp";
    if(num===2) text="🧸 Một con gấu bông thật dễ thương";
    if(num===3) text="🍽️ Đi ăn thật ngon";
    if(num===4) text="🎉 Đi chơiiii";
    document.getElementById("gift-result").innerHTML=`
      <div class="gift-content">${text}</div>
      <button class="btn-next" onclick="end()">Chọn món này</button>
    `;
  }

  function end(){
    document.getElementById("gift-screen").classList.add("hidden");
    document.getElementById("end-screen").classList.remove("hidden");
  }
</script>

</body>
</html>

